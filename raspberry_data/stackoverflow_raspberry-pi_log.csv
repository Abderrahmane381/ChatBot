ID,Title,Question,Top Answers,Score,Tags,Date
79452525,logging variables in codesys using caafile or similar,"what im after is logging variables, to a text file or csv, continuously, while my task main prg and some subfbs is running, hopefully in a way which doesnt degrade the task performance. so feel free to suggest a different method entirely, or to troubleshoot the below. ive looked into oscat network but i couldnt get the libraries to load correctly and more recent codesys forge posts suggest caa file is the more uptodate, and generic, method for logging. i also tried cmplog but it was very slow and didnt create an external file. what im currently testing in codesys v3.5 sp20. target device is codesyscontrolforraspberrypimcsl, version 4.11.0.0. testing in simulation mode from a windows pc, but the instance will eventually run on a raspberry pi. using caa file version 3.5.19.0. single task, priority 1, cyclic 4 ms. runs a single prg. the codesys project is saved under cusersdocuments to avoid any weirdness with long file names. the prg is a modified for correct function calls version of caas default example program plcprg var xfilestdinit boolfalse uifilestdstate uint0 sfilename file.caa.filename testfile.txt hfile file.caa.handle sfileteststring stringhello caa library user sfilestring string szfilesize1 file.caa.size 0 szfilesize2 file.caa.size 0 filop file.open filwr file.write filrd file.read filcl file.close endvar if not xfilestdinit then filopxexecutefalse filclxexecutefalse filwrxexecutefalse filrdxexecutefalse xfilestdinittrue uifilestdstate0 else case uifilestdstate of 0 create a new file filop.sfilenamesfilename filop.efilemodefile.mode.mrdwr filop.xexclusivetrue filop xexecutetrue if filop.xdone then hfilefilop.hfile uifilestdstate1 endif if filop.xerror then error handling endif 1 write text in the file filwr.hfilehfile filwr.pbufferadrsfileteststring szfilesize1sizeofsfileteststring filwr.szsizeszfilesize1 filwr.uditimeout100000 100ms timeout filwr xexecutetrue if filwr.xdone then uifilestdstate2 endif if filwr.xerror then error handling endif 2 read file testfile.txt filrd.hfilehfile filrd.uditimeout100000 100ms timeout filrd.pbufferadrsfilestring filrd.szbuffer255 filrd xexecutetrue if filrd.xdone then szfilesize2filrd.szsize if szfilesize2 szfilesize1 then uifilestdstate3 else error handling endif endif if filrd.xerror then error handling endif 3 close file testfile.txt filcl.hfilehfile filcl xexecutetrue if filcl.xdone then uifilestdstate4 endif if filcl.xerror then error handling endif 4 end of example endcase endif when i run the above in simulation mode, uifilestdstate begins at 0 and filop xexecute is true but filop.xdone is always false. it looks like filop.eerror asmcreatejobfailed but i cant figure out why. i tried an absolute location instead of a relative one but that didnt solve the issue.",codesys inbuilt logger can be used with following settings. in codesyscontroluser.cfg cmplog logger.0.nameplc.log gt generic logs of the components logger.1.namelogger.log gt user defined logs in codesyscontrol.cfg cmplog logger.0.filter0x0000000f logger.0.enable1 logger.0.maxentries100000 logger.0.maxfilesize10000000 logger.0.maxfiles1 logger.0.backend.0.classid0x00000104 logger.0.type0x314 logger.1.filter0xffffffff logger.1.enable1 logger.1.maxentries100000 logger.1.maxfilesize10000000 logger.1.maxfiles1 logger.1.backend.0.classid0x00000104 logger.1.type0x314,0,logging;raspberry-pi;codesys,2025-02-19
75582230,mqtt onpublish gives no feedback and connection gets lost every 90 seconds despite keepalive930,"i am using pahomqtt in my python script and the values of my temperature sensor are published every 15 minutes as they should, so this works fine. but on closer consideration of my logfile the mqtt connection gets lost approx. every 90 seconds although my keepalive value is at 930 15 minutes and 30 seconds. the entries in my logfile deliver inforootunexpected disconnection. reason connection refused unacceptable protocol version. does anyone know what the problem could be? cheers this is my script import paho.mqtt.client as mqtt import adafruitdht import time import ssl import logging logging.basicconfiglevellogging.debug, filenamehomepidocumentsmqtt.log, encodingutf8 set up dht22 sensor dhtsensor adafruitdht.dht22 dhtpin 4 gpio pin number the sensor is connected to username mastermqttuserkarlsruhe secret ifysftrjtzktzkfdsc host 192.168.0.52 port 8883 clientid raspika assetid 3ndhrtjtz55rrga def onconnectclient, userdata, flags, rc printquotconnected with result code quotstrrc logging.infoquotconnected with result code quotstrrc def onpublishclient, userdata, msg printmsg.topicquot quotstrmsg.payload logging.infomsg.topicquot quotstrmsg.payload def ondisconnectclient, userdata, rc if rc ! 0 printquotunexpected disconnection.quot logging.infofquotunexpected disconnection. reason mqtt.connackstringrcquot def onlogclient, userdata, level, buf printquotlog quot, buf logging.infoquotlog quot, buf mqttclient mqtt.clientclientid mqttclient.usernamepwsetusername, passwordsecret context ssl.sslcontextssl.protocoltlsv12 mqttclient.tlssetcontextcontext mqttclient.onconnect onconnect mqttclient.ondisconnect ondisconnect mqttclient.onpublish onpublish mqttclient.onlog onlog mqttclient.connecthost, portport, keepalive930 mqttclient.loopstart continuously read and send temperature values while true humidity, temperature adafruitdht.readretrydhtsensor, dhtpin if humidity is not none and temperature is not none mqttclient.publishfquotmasterclientidwriteattributevaluetemperatureassetidquot, temperature mqttclient.publishfquotmasterclientidwriteattributevaluehumidityassetidquot, humidity else printquotfailed to read temperature sensor dataquot printtemperature printquotquot time.sleep900 disconnect mqtt client mqttclient.disconnect mqttclient.loopstop",,0,python;logging;raspberry-pi;mqtt;publish,2023-02-27
73778446,"raspberry pi pico script stops after a while, how to do logging?","ive got a script running on my raspberry pi pico w that works fine, until it doesnt. it has worked for a few days without a problem and now seems to just stop sometimes. it is hard to find out what goes wrong without logging. is there a best practice to go about this? id like to maybe? just log all the exceptions or something. im running micropython and using thonny. context ive made an automated door for my chicken coop. ive repurposed and combined some scripts i found on the interwebs to make a clock that uses wifi and ntp every hour to keep running on time. my script checks when its time to open or close the door and then executes the open or close script that makes the 12v dc motor go. i even have limit switches checking if the door was completely openedclosed. i make the led blink every second, so i can see when it stops. it has been my very first project with raspberry pi, micropython and electronics in general, so im actually quite surprised i got this far without messing up, so please go easy on me. ive already to content with four chicks that have subpar service here p really appreciate the help!","hi the solution is to reset the flash memory and you can do this by dragging and dropping a special uf2 binary onto your pico when it is in mass storage mode. to procure the uf2 binary go here i hope this solved the issue. thank you. naveen ps || ive also posted this question on the rp forum and got this answer the following may help if placed near the start of your script but be warned ive not tested this and it will eventually fill up the file system. import os logfile openlog.txt, a duplicate stdout and stderr to the log file os.duptermlogfile beyond that, youre probably looking at adding yor own logging functionality and exception handling. afiak micropython doesnt have the logging module. this seems to work.",1,logging;raspberry-pi;micropython;raspberry-pi-pico,2022-09-19
72882816,continuously logging the amperage data coming from a raspi hat problem,"i am fairly new to python, and coding in general, and i am tasked to write a program to set an output a and continuously log the a data that is coming from a hat on a raspberry pi model 4b running ubuntu, program which i will use for my master thesis. i have the part of the program that does set the a, but i have not been successful in making a loop that saves the data in a file every second. i have both tried saving the data in a .csv format and in a .txt one, but both to no avail, as the file is created, but it is always empty. also, the loop is not closed, as we want to have it continuously running until we decide to hit stop. until now i have stopped the program by hitting quotstopquot in the program i am writing the code in thonny, as i habe tried with the keyboard library to code it stopping once a specific key was pressed to no avail. import megaind hat library from datetime import date time library for file name import schedule for iteration import time amperage inputquotinput the desired amperage.the input must be between 4 and 20nquot amperage imput amperage floatamperage while amperage lt 4.0 or amperage gt 20.0 while statement that controls if the amperage value is between the parameters amperage inputquotplease imput a number between 4 and 20nquot amperage floatamperage megaind.set420out0,1,amperage sets the 1st output pin to the amperage value today date.today string variable with its contents as todays date timewrite 0 inamperage 0 def timefun function that writes seconds and input value global timewrite global inamperage timewrite 1 inamperage megaind.get420in0,1 txtfile.writequot0,1nquot.formattimewrite, inamperage with openhomelaserlabdesktopdischarge filess.txt today, a as txtfile writes the data in a csv file while true schedule.every1.seconds.dotimefun iterates each second while true schedule.runpending time.sleep1 this is me trying to save it as a txt file import megaind hat library from datetime import date time library for file name import csv for file writing import schedule for iteration import time amperage inputquotinput the desired amperage.the input must be between 4 and 20nquot amperage imput amperage floatamperage while amperage lt 4.0 or amperage gt 20.0 while statement that controls if the amperage value is between the parameters amperage inputquotplease imput a number between 4 and 20nquot amperage floatamperage megaind.set420out0,1,amperage sets the 1st output pin to the amperage value today date.today string variable with its contents as todays date timewrite 0 def timefun function that writes seconds and input value global timewrite timewrite 1 inamperage megaind.get420in0,1 with openhomelaserlabdesktopdischarge filess.csv today, a as csvfile writes the data in a csv file writer csv.writercsvfile while true lineamp timewrite,inamperage writer.writerowlineamp schedule.every1.seconds.dotimefun iterates each second while true schedule.runpending time.sleep1 this is instead trying to save it as a csv file. the format of the file is not important, as in the end it will all be imported in either r or excel, so i am open to suggestions of any kind. also, the megaind library is the one provided by the hat manifacturer that i am using to get the data from said device. i have tried both with the linux terminal and from the program itself, and it is getting the data from the hat, so the issue doesnt lay there. i am probably doing something wrong that will be apparent to people more experienced than me, but i cannot see what that might be. any help will be greatly appreciated!",,0,python;csv;logging;raspberry-pi,2022-07-06
70928912,why can39t root user modify the logfile created by another user? even with neccessary readwrite permissions,"im using pythons logging library to log some events in a few scripts. each script is run as a separate process, some are run as root whilst others are run as another user the default raspberry pi user in my case. ive set up the configuration in a single yaml file and passed this into dictconfig when the script starts up. none of the scripts share a logfile they only share the config. simplified yaml file version 1 disableexistingloggers true formatters standard format quotasctimes names levelnames messagesquot handlers console class logging.streamhandler level debug formatter standard stream extsys.stdout scannerhandler class logging.handlers.rotatingfilehandler formatter standard filename tmpscanner.log maxbytes 10485760 mb backupcount 3 encoding utf8 prehookhandler helpers.allwriterotatingfilehandler filename tmpprehook.log formatter standard maxbytes 10485760 mb backupcount 3 encoding utf8 root level notset handlers console propagate yes loggers scanner level debug handlers scannerhandler propagate yes prehook level debug handlers prehookhandler propagate no setup method and a custom file handler that ensures every user can read and write to the file import os import stat import yaml import logging.config import logging.handlers import logging def setuploggingdefaultpath, defaultlevellogging.info path defaultpath if os.path.existspath with openpath, rt as f config yaml.safeloadf.read logging.config.dictconfigconfig else printfailed to load configuration file. the log file could not be opened. class allwriterotatingfilehandlerlogging.handlers.rotatingfilehandler def openself rtv logging.handlers.rotatingfilehandler.openself currmode os.statself.basefilename.stmode adds read and write permissions to all users os.chmodself.basefilename, currmode stat.siwoth stat.siroth return rtv then in my respective scripts i setup the logger as follows helpers.setuploggingfullpathtoconfig.yaml logger logging.getloggerloggerdefinedinconfig i run one script as my default user, then when i run the other using sudo the following exception is thrown traceback most recent call last file quotusrlibpython3.9loggingconfig.pyquot, line 564, in configure handler self.configurehandlerhandlersname file quotusrlibpython3.9loggingconfig.pyquot, line 745, in configurehandler result factorykwargs file quotusrlibpython3.9logginghandlers.pyquot, line 153, in init baserotatinghandler.initself, filename, mode, encodingencoding, file quotusrlibpython3.9logginghandlers.pyquot, line 58, in init logging.filehandler.initself, filename, modemode, file quotusrlibpython3.9logginginit.pyquot, line 1142, in init streamhandler.initself, self.open file quothomepi.developmentthecakecanwaithelpers.pyquot, line 20, in open rtv logging.handlers.rotatingfilehandler.openself file quotusrlibpython3.9logginginit.pyquot, line 1171, in open return openself.basefilename, self.mode, encodingself.encoding, permissionerror errno 13 permission denied tmpprehook.log",,0,python;python-3.x;linux;logging;raspberry-pi,2022-01-31
66579064,gcp logging to both local and cloud logging on iot device?,"i have some python scripts running on iot devices raspberry pis which i want to keep track of using gcp logging. originally, my scripts were simply logging to a local file, but now i want to be able to look at my devices logs from the gcp console. i have tried the following import the cloud logging library import google.cloud.logging from google.cloud.logging.handlers import cloudlogginghandler from google.cloud.loggingv2.resource import resource logproject projectid resourcetype cloudiotdevice devicenumid iotdevicenum deviceregistry registryid location location loggername rpi1scriptlogger loglabels projectidlogproject, devicenumiddevicenumid, deviceregistryiddeviceregistry, locationlocation logresource resourcetyperesourcetype, labelsloglabels prepare a client with the google cloud logging library client google.cloud.logging.client prepare a handler and attach the client and the resource handler cloudlogginghandlerclient, resourcelogresource formatter logging.formatterquotasctimes levelnames messagesquot,ymdhms handler.setformatterformatter initiate standard python logger and set it up logger logging.getloggerloggername logger.setlevellogging.info attach the handler so logs are uploaded to the cloud logger.addhandlerhandler at first i thought this solution would work, but then eventually i stopped getting logs on gcp even though the script was running. after i stopped it, it said something along the lines of quottrying to push x pending logsquot but immediately failed. it looks like it got stuck and wasnt uploading the logs, so i lost them completely as i also dont have them locally from changing the logger. as i understand it, the default cloud logging handler is background threaded transport, and i could change it to sync transport as the docs indicate so it uploads the log directly however, im not sure how to change the transport. also, i dont want the script to get stuck on trying to upload a log if the connection is lost, ad my script can continue without connection. is there a better way to upload my devices logs to gcp? or at the very least have my logger save them both to a local file and try to upload them, this way if it gets stuck i can potentially go through my log file and upload them. i even considered saving logs locally as i always had, and have another script trying to upload them separately, but this doesnt sound like a good idea. any ideas would be appreciated, i feel like this is an already solved problem but i dont know what that solution might be.",,0,python;logging;google-cloud-platform;raspberry-pi;iot,2021-03-11
61987162,why is my cron command not outputting in log file?,"on my raspberry pi, i have entered the following entry in my crontab using crontab e without sudo echo hello world ampgtgt homepitest.txt just as a test, that is. after restarting cron sudo etcinit.dcron restart the test.txt file is created in homepi, but the content remains empty. why? if i run this without the asterisks in my ssh terminal on the rasberry pi, it works fine. i got to this point because my goal is to run a python script and log any errors, because sometimes it stops running and i dont know why. hence my need for logging. thank you for your help! p.s. i have the same problem on my orange pi that runs raspbian debian buster, but there cron doesnt work for some reason so there i am using rc.local to run my scripts on boot. but the same problem arises log file is created but no content is added.","it appears that raspbian is using dash as the default shell for cron. dash is sh compliant and not bash compliant. that means that you cannot use ampgtgt. you must use gtgt output.log 2gtamp1 instead. youre saying that your goal is to run a python script. theres a catch with that too. pythons buffering output so if its too short it wont appear in your log file by default. you can use python u for unbuffered output. i hope that my answer makes sense. || python homepicode.py 2gtamp1 homepicode.log hello, the last part of the above snippet in the crontab will write every log in the file homepicode.log hope it helps",2,python-3.x;logging;cron;raspberry-pi;debian,2020-05-24
58951469,windows 10 iot core device portal does not show loggingchannel events,"i am trying to log the information using windows.foundation.diagnostics.loggingchannel class, in my uwp headless app that runs on a raspberry pi. i dont see any errors while running the application, but i cannot see any events in device portaletw viewer. i have enabled microsoftwindowsdiagnosticsloggingchannel level 5. below is the code snippet from my application. using windows.foundation.diagnostics loggingchannel loggingchannel new loggingchanneltest provider, null loggingchannel.logmessageprocess started,logginglevel.information please note that i can see the events for other providers like microsoftwindowskernelnetworking.","the loggingchannel registered in your code is not for microsoftwindowsdiagnosticsloggingchannel but for your custom channel. you can see the events via enabling the custom provider with guid. for example, i run the sample on my raspberry pi 3, i can see the events in device portal.microsoftwindowsdiagnosticsloggingchannel is system registered provider.",0,logging;uwp;raspberry-pi;etw;windows-iot-core-10,2019-11-20
58486927,detect specific sound from physical source and log datetime,"in short we are doing a uni project and want to build a device to log datetime when a wall mounted phone rings. we want feedback and alternatives on how we could go about building the logger and programming it to to what we need. what we need in the end is a dataset showing when and how often the phone rings. background the sound is a phone connected to the front gate and has a standard ringringring sound. the device could be located directly on top of one of the phones which are the sound sources on each floor at the customers site. the phones are centrally located and will have people moving and talking in close proximity. edit the phone is not used for anything else but the front gate. we have inteam experience with raspberrypi, python and common frontend languages and access to university and customer resources if we would need them. requirements must not be equipped or configured as a listening device because of risk capturing sensitive discussions should be able to log without maintenance for at least three weeks should have high accuracy in logs a log when someone talks or walks by is a false positive should be cost effective in hardware could use raspberrypi or similar should not simply record sounds, sound levels, research i found a related thread detect tap with pyaudio from live mic where they discuss reading and comparing 0,05 sec blocks to start record audio when someone taps the mic. in our scenario the sound difference will probably not be as distinct as taps on a mic but this might be a suitable approach. another post we found was this on detecting if specific sounds. we could get a clean copy of the sound but i cant help but feel like there probably is an easier way to do it. this post about detecting a specific sound is about mls or sine sweepsis not really what we want to do as the audio we want to detect is not arbitrary but a fixed ringringring sound. we have not found audacity to be able to detect specific sounds. perhaps a contact microphone could be used to minimize the unwanted noise? the device will be right on top of the source, but since its a phone it could cause false positives if somebody uses the phone? we might be able to dedicate one of the phones to be purely data collection and make it off limits for regular use. we appreciate any and all feedback to help us with this project. thanks in advance. update 1 we came up with a shortcut that would cut down on the programming required. what if we measure the current sent to the phones speaker? it would require us to open up the phone and place some cables on the speaker element but it should be quite easy. we are planning some initial testing early next week. update 2 we were not allowed to open the phone case as they were owned by the landlord. with that said we are looking into using arduino to handle the sensors. final update in the end we opted to go with a raspberrypi we found a 3b we could use, not minding that it would be a bit overpowered and a sparkfun sound detector to communicate using the gpio pins over i2c. we stubled upon some issues that could be hw fault in rpi or sensor alternatively lack of knowledge from our side. this being just a subproject and not of very great consequence in our case we dropped it to focus on more pressing matters. kinda sucks because of the lost hours but you got to prioritize. happy hacking",,0,python;logging;audio;arduino;raspberry-pi,2019-10-21
57708637,advice for keeping python logging script running indefinitely. script acts up after many hours,"im writing a script to log serial data from a solar inverter. the script runs fine for many hours on windows, but then starts to act up. the script should print debug data to console and write logging data to a .csv file roughly every minute. printing debug data to stdout works for hours, but then starts to become sporadic. when i mouse over the powershell console and bring it into focus again the printing seems to resume. does windows put oldinactive processes to sleep or something? the script should write logging data to a .csv file roughly every minute, however it sometimes goes many minutes without updating the .csv file. when it does finally update the file no data is lost, so its still clearly logging data in the backround. edit looking closer at the .csv data, it appears there are in fact temporal breaks in the data, where i assume the process is being suspended and then later resumed. ive been programming for years, but i am new to python. im sure i havent made an overflow error or something similar. i dont think youll glean anything from it, but ive put the main loop of the script below anyways. try if not ser.isopen printopening serial ser.open global invertersettings invertersettings crc.readsettingsser qpigscolumns dp.qpigsparamsmodified.keys printqpigscolumnsn, qpigscolumns qpigsarray pd.dataframe, columnsqpigscolumns qpigsarray.setindex24hdecimal, inplacetrue today time.strftime a, d b y, time.localtime nicely formatted date variable printsarting today while 1 newtoday time.strftime a, d b y, time.localtime checking for a new day every minute or so if today ! newtoday today newtoday updating to new day qpigsarray pd.dataframe , columnsqpigscolumns creating new dataframe for new day qpigsarray.setindex24hdecimal, inplacetrue printn today read solar data loop print., end, flushtrue for i in range30 rawqpigsdata dp.readqpigsser data pd.dataframerawqpigsdata, columnsqpigscolumns data.setindex24hdecimal, inplacetrue qpigsarray qpigsarray.appenddata, ignoreindexfalse qpigsarray.tocsvtoday .csv if rawqpigsdata1 gt 6 and rawqpigsdata1 lt 18 between 6 am and 6 pm daylight hours if rawqpigsdata13 gt pvocv 2 and rawqpigsdata15 lt 10 panels have enough voltage, but not producing any solar power print?, end, flushtrue floatv invertersettingsusersettingsfloatchargev rx1 crc.adjustfloatv floatv 0.1, ser potential fix for panels not working? rx2 crc.adjustfloatvfloatv 0.1, ser if rx1 rx2 ack print?, end, flushtrue else print, end, flushtrue except exception traceback.printexc finally ser.close the script doesnt seem to crash or throw any errors. so im assuming this is a error with the way windows handles long running processes. i plan to move this to a rpi soon btw. so in general, i need advice on how to set up python code so it can run indefinitely on windows and on a rpi without being put to sleep, or crashing after months. how does one usualy go about this?",,4,python;windows;logging;raspberry-pi;scheduling,2019-08-29
56908049,"wrote a python code to retrieve coordinates and write them on a csv file, the is made but is empty, not even the headers are added","i used a code that retrieves coordinates via a gps chip and writes it on a csv file. the csv file is made but is empty on every run. this is my first time coding with python so cant really get my head around the problem. here is the code from time import sleep, strftime, time import serial import pynmea2 import datetime from csv import writer setup the serial port to which gps is connected port devttys0 ser serial.serialport, baudrate 9600, timeout 0.5 dataout pynmea2.nmeastreamreader counter 0 def getsensedata while true newdata ser.readline if newdata06 gpgga parsedline pynmea2.parsenewdata latitudereading parsedline.latitude alpha latitudereading longitudereading parsedline.longitude beta longitudereading sensedata sensedata.appendcounter sensedata.appenddatetime.datetime.now sensedata.appendalpha sensedata.appendbeta return sensedata with opengpsdata.csv, w as f datawriter writerf datawriter.writerowterm no.,date and time,latitude,longitude while true data getsensedata datawriter.writerowdata counter counter 1 i also tried to change the indents a little bit, but the csv file still comes out empty","you code looks generally correct, but since you never close or flush the file in the infinite while loop, the file may be written slowly enough that it hasnt flushed to disk yet. heres a simplified version of your code with an added flush. if you run this script without stopping it and look at the csv content, youll see it add a line every second. remove the flush and it may be blank for a long time...at least until the os decides it is time to flush the buffer to disk itself. !python2 from csv import writer import time counter 0 with opengpsdata.csv, wb as f datawriter writerf datawriter.writerowterm no.,date and time,latitude,longitude while true time.sleep1 data counter,2,3,4 datawriter.writerowdata printdata f.flush counter counter 1",0,python;csv;logging;raspberry-pi;gps,2019-07-05
56725289,python logging module no output to log file on raspberry pi but works on mac os,"i have setup a logger for my script that works perfectly on my mac. but i need this program to be running 247 on my raspberry pi. however, when it runs on there the log file just remains blank for some odd reason. here is how i am setting up the logger import logging import ... import ... logger logging.getloggername logger.setlevellogging.debug formatter logging.formatterasctimesnamesmessages filehandler logging.filehandlerfilenamelogfile.log filehandler.setformatterformatter logger.addhandlerfilehandler and later using in my methods by just calling logger.debugmsg here i dont know why this is happening, is there a different way to setup the logger on raspbianlinux than with mac os??","i was having a similar problem with logging that was not supposed to happen i searched a lot for answers, but found none in the end, i looked in usrlibpython3.5logginginit.py to see it. in my case, when i used the basicconfig, it says that if a handler already exists logging.root.handlers nothing will happen similar to your case i believe. so, i just make it empty with logging.root.handlers after importing logging module and it started to log to the file. i dont know if it is exactly the same for you, but i would try this or take a look in the functions that your calling inside the above file path just be aware of the python version that you are using. hope it helps!",0,python;logging;raspberry-pi;raspbian,2019-06-23
50927618,python logging debug level logs not logged when script autostarted from etcrc.local,"on my raspberry pi raspbian the following code test.py logs both debug and info log messages as expected in the log file homepitesttest.log when launched from the console, but only logs the info log message when launched at startup by the root user from the etcrc.local file. import logging logging.basicconfigfilenamehomepitesttest.log,levellogging.debug, formatasctimes modules levelnames messages logging.debugdebug error logging.infoinfo error why ?","the code block you have specified should work perfectly fine and the debug message should go to the specified file but remember that you can do logging.basicconfig only once for the python process. if you already done a logging.basicconfig from another module, or if you have configured the root logger in some other way, your config wont have any effect here is a snip from helplogging.basicconfig basicconfigkwargs do basic configuration for the logging system. this function does nothing if the root logger already has handlers configured. it is a convenience method intended for use by simple scripts to do oneshot configuration of the logging package.",0,python;logging;raspberry-pi;raspbian,2018-06-19
50802586,what would be the most efficient way to log a raspberry pi39s data over ssh?,"i currently have a python script on a raspberry pi that creates a log file in the same directory while running, with important data that i would like to view in real time on my laptop that i can ssh into the pi with. obviously i can view the log file on my laptop while sshd using a text editor, but its not a realtime data stream. unfortunately while i have a decent amount of python experience, i dont know much about networking stuff, except that i could scprsync the file onto my computer but of course, thats not giving me a real time view of my log file either.","two ideas spring to mind... the unix syslog facility allows distributedremote logging. you would probably find a python module, or you could just create a socket and send messages to the syslogd on your laptop. you could even send messages with netcat at a pinch. related article you could set up redis on your laptop and use the python redis module to send timetagged messages either to a queue or a sorted hash and write a small script to wait on the queue on your laptop. messages could also be given a time to live or expiry time so the memory demands dont get too excessive. related article a simpler option might be to write your log to a file on your raspberry pi and then depending on the os of your laptop, to share that directory via nfs or samba with your laptop. you can then use the follow f option of tail to see last few lines continuously updated tail f output.log || tail is commonly used for this, tail f yourlogfile.log will show the ten latest lines of the file and update on file change. || netcat. on local pc nc l 2000 on remote tail f filename nc hostip 2000",1,logging;ssh;raspberry-pi;file-transfer,2018-06-11
50250485,unable to log output of a always running python script to a file,"i have this script that checks and waits for some lan connections to be established import subprocess import time import os import sys sys.stdout openhomepidesktopfile.txt, w printchecking lan connections... time.sleep2 whiletrue fopensysclassneteth0carrier,r statef.read if1 in state printlan connection to target device established successfully ! break else printplease establish lan connection to the target device ! time.sleep4 i want to be able to see its output in the specified log file but it stays empty.","flush the output stream after each write. you seem to be using python 3, so you can set the flush parameter for the print function printmsg, flushtrue if you are using python 2 then you can use sys.stdout.flush and write a logging function def logmsg print msg sys.stdout.flush perhaps a better way is to use the logging module. here is a very simple example import logging import time logging.basicconfigfilenamehomepidesktopfile.txt, levellogging.debug for i in range10 logging.debugplease establish lan connection to the target device ! time.sleep4 this will append to the file. if you want to overwrite the file pass filemodew to basicconfig. also, if you dont like the debugroot prefix you can use formatmessages to log the message only logging.basicconfigfilenamehomepidesktopfile.txt, filemodew, levellogging.debug, formatmessages || i believe you have to close it after everytime you write. you can implement a print wrapper like this def printtextlog with openhomepidesktopfile.txt, a as myfile myfile.writetextlogn your code with wrapper should look like this import subprocess import time import os def printtextlog with openhomepidesktopfile.txt, a as myfile myfile.writetextlogn printchecking lan connections... time.sleep2 whiletrue fopensysclassneteth0carrier,r statef.read if1 in state printlan connection to target device established successfully ! break else printplease establish lan connection to the target device ! time.sleep4 edit be careful, opening file with w will delete all contents of the file and create content from scratch. if you want to append, you can use a.",0,python;logging;raspberry-pi,2018-05-09
49015314,when i run a python program using process.start the log in my python program does not work?,"im running a python program from c using process.start on a raspberry pi zero w. ive tested it the program is running when called but it will not log to file. but if i just run the program myself python relays.py 0 0 0 0 0 the python log works. does anyone know what is causing this problem? below are the python code and c function void update string acommand status console.writelinelookslikewemadeit acommand string location homepidebugrelays.py convert.tostringacommand run python processstartinfo info new processstartinfopython, location process.startinfo console.writelineyouhavepassed import rpi.gpio as g import time import sys import socket import threading import logging g.setwarningsfalse g.setmodeg.board relays 24,26,32,36,38 for r in relays g.setupr,g.out logging.basicconfigfilenamerelaytrigger.log,levellogging.debug,formatasctimes messages logging.inforn logging.infosys.argv logging.inforn heat if sys.argv1 1 heater true g.outputrelays0,1 logging.infoheatonrn else heater false g.outputrelays0,0 logging.infoheatoffrn main if sys.argv2 1 mainpump true g.outputrelays1,1 logging.infomainonrn else mainpump false g.outputrelays1,0 logging.infomainoffrn aux if sys.argv3 1 auxilarypump true g.outputrelays2,1 logging.infoauxonrn else auxilarypump false g.outputrelays2,0 logging.infoauxoffrn auxset if sys.argv4 1 auxsetting true g.outputrelays3,1 logging.infomainhighrn else auxsetting false g.outputrelays3,0 logging.infoheatlowrn light if sys.argv5 1 lighting true g.outputrelays4,1 logging.infolightonrn else lighting false g.outputrelays4,0 logging.infolightoffrn",i seems to me like problems with your cwd current working directory. depending on from where an python application is started relative paths may differ. solution 1 the pythonside solution use absolute paths! relative paths are more likely to be unsafe. solution 2 the cside solution use the processstartinfoproperty workingdirectory to define your cwd. your cwd is usualy the directory containing your .py file. link to processstartinfoclass hf,1,c#;python;logging;raspberry-pi;process.start,2018-02-27
47783372,script to loggin in raspberrypi,"ive tried to write a very little script in order to connect to my raspberrypi as follows !usrbinpython connect to raspberry pi ethernet import os os.popenssh l pi 169.254.249.166 but it returns just immediately prints the prompt for my password three times i cant write anything and i dont know why. after the request i just can push intro and it returns to me to the prompt. the output of the script is as follows xxxxxx python connectraspberry.py xxxxxx pi169.254.249.166s password xxxx pi169.254.249.166s password permission denied, please try again. pi169.254.249.166s password permission denied, please try again. pi169.254.249.166s password permission denied publickey,password. why doesnt the script, or maybe the raspberry as i guess from the prompt, let me type the password? it just answers permission denied, but i type nothing. what i really try to write is to run a script in konsole python code.py and that it returns to me to the rasp prompt i suppose i should write the password into a variable but first, i try to log in automatically and write the password xxxx python code.py pi169.254.249.166s password the programs included with the debian gnulinux system are free software the exact distribution terms for each program are described in the individual files in usrsharedoccopyright. debian gnulinux comes with absolutely no warranty, to the extent permitted by applicable law. last login sun sep 17 231657 2017 from peces.local piraspberrypi on the other hand, any help about how to write the password into a variable in the python script to login automatically, i mean xxxxxx python connectraspberry.py the programs included with the debian gnulinux system are free software the exact distribution terms for each program are described in the individual files in usrsharedoccopyright. debian gnulinux comes with absolutely no warranty, to the extent permitted by applicable law. last login sun sep 17 231657 2017 from peces.local piraspberrypi for the latter, i dont understand so well the ssh commands f option this flag implies the n flag. i am a little confused about if it is what i need for logging in automatically.","os.popencommand doesnt connect the standard input of command to your console your keyboard and display, it just starts a process inside the python program and waits for python to talk to it. os.popen is very old and long since obsolete you want to avoid this, and use something more modern. the python 3.6 documentation suggests subprocess.run or something like that, but interacting with ssh with a bare subprocess is still tricky and cumbersome you really want to use a dedicated library which knows how to do that. somebody suggested paramiko in the comments and i concur, though maybe also explore pexpect. import paramiko ssh paramiko.sshclient ssh.connect169.254.249.166, 22, pi, xyzzy stdin, stdout, stderr ssh.execcommandpython code.py ... interact with your script ssh.close basically copypasted from here. there is no konsole here, the only interface is a remote ssh session connected to the network instead of to a terminal window. if your script is not interactive, a lot of this is unnecessary, really. just ssh pi python code.py gtoutput from the shell then! || thanks for the usuful answers. i had been writting differents codes and i have this !usrbinpython connect to raspberry pi by ethernet import paramiko try sshparamiko.sshclient ssh.loadsystemhostkeys ssh.connect169.254.249.166, 22, pi,raspberry except sshexception printerror stdin, stdout, stderr ssh.execcommandcat etcmotd printstdout.read.splitlines var stdin, stdout, stderr ssh.execcommandwho datastdout.read printdata while var!close loop until close passphrase printtype a command. varinputgtgt stdin, stdout, stderr ssh.execcommandvar printread gt , stdout.read.splitlines printerror gt , stderr.read ssh.close running this code i can logging into raspberrypi and execute a differents types of commands but not all available commands. for instance, i cannot move between folders, i mean, if i type cd videos into var. stdout is and even the pwd command return always the same path homepi it is the output xxxx python connectraspberry.py b, bthe programs included with the debian gnulinux system are free software, bthe exact distribution terms for each program are described in the, bindividual files in usrsharedoccopyright., b, bdebian gnulinux comes with absolutely no warranty, to the extent, bpermitted by applicable law. bpi tty1 20170920 1017npi 0 20170920 1017 0n type a command. gtgt cd videos read gt error gt b type a command. gtgt pwd read gt bhomepi error gt b type a command. gtgt to be connected to the raspberry is that i am looking for, but why it is not complety usuful?? i mean, why some commands doesnt work, like cd .. or cd home or even sudo su also i have tried to copy files from raspberry to my pc but it doesnt run gtgt sudo cp salida.txt homemyuser read gt error gt b type a command. gtgt in my pc isnt salida.txt again, thanks for the answer, i got it that i needed but now new problems appeared",1,python;logging;raspberry-pi;debian,2017-12-13
38528681,log temperature and humidity into rrdtool,"my pi logs temperature and humidity every minute into a csv file and in a rrdtool database i created this rrdtool database like this rrdtool create homepidesktopgaragedata.rrd step 60 dstemperaturgauge300uu dshumiditygauge300uu rraaverage0.51224 rraaverage0.528831 so the database should accept one value every 60 seconds i am logging with a python 3 script. here is the important part. import adafruitdht from rrdtool import update as rrdupdate humidity, temperatur adafruitdht.readretryadafruitdht.am2302, 22 rrdupdatehomepidesktopgaragedata.rrd, nss temperatur, humidity when using rrdtool fetch garagedata.rrd average r300 i am only seeing nan temperatur humidity 1469111040 nan nan 1469128320 nan nan 1469145600 nan nan 1469162880 nan nan 1469180160 nan nan 1469197440 nan nan and when plotting the database.... nothing is shows up in the plot. where is the problem in my script? i thought i did everything exactly like in this tutorial","you may not have collected enough data yet. your rrd definition uses a 60s step, but the smallest rra is a 12minute step 1cdp 12pdp. this means youll need to have at least 2 entries to have something meaningful, and so have data collected for at least 24 minutes, probably more, before you see something in your output. as you are trying to fetch data at a 5min interval, i would suggest that you also have a 5pdp rra, and possibly also a 1pdp rra for testing. these rra are also rather short but i assume you have a reason for that. rrdtool create homepidesktopgaragedata.rrd step 60 dstemperaturgauge300uu dshumiditygauge300uu rraaverage0.51600 rraaverage0.55200 rraaverage0.51224 rraaverage0.528831 if you add these additional rras then youll be able to view your collected data much sooner. if you still see nan in the values, possibly your collected data are incorrect, and youre readretry function call is not returning valid data. print these values to a file so you can see that they are really numerical.",1,python-3.x;logging;raspberry-pi;rrdtool,2016-07-22
36826886,python logging module output to text file when running from command line,"i have a python program that uses the logging module to output data to a text file, the problem i have is that the output to the text file works fine when i run the script in pycharm the 110 values are output to both the console screen and written to logtestfile.txt, but when i run the script from the command line only the console output appears with nothing written to the .txt file. this occurs in both ubuntu or on my raspberry pi. ill be running the script on the pi automatically on startup as sudo, is there a way to configure either the pi or the script so that the text output works correctly? !usrbinpython coding utf8 import logging logging.basicconfigfilenamelogtestfile.txt, levellogging.debug, formatlevelnames asctimes messages, datefmtmdy ims i0 while ilt10 logging.infologging test .formati i1","the code you have provided runs well. if you have problems with finding the log file being properly created, the reasons might be not having permission to create the log file the script does not run at all if you plan to run the script as long running service, i would recommend to skip creating explicit log file and rather log to stdout. the output sent to stdout is easy to see, capture and process by program controlling execution of the script e.g. supervisord, systemd etc.. another option would be to log to syslog directly, but this could become more complicated as your program would have to know on its own, what values to use for identifying the process. this is mostly simpler for process manager then for the program itself.",6,python;logging;raspberry-pi;raspberry-pi2,2016-04-24
36814257,running python script unbuffered on boot?,"i have a script that runs in the background, and it is supposed to run 247, but some times it crashes. but its running on my headless pi, so i dont get to see the error messages when it crashes. i found a solution where i can have the script print to a file unbuffered python u mybackgroundscript.py gt errorfile.txt amp this works, if i activate it manually through ssh. but i want it to run on bootup, so i added that line to my etcrc.local and now it wont run. it runs without the u, but then it wont write output. am i stuck with using some sort of logging module? thanks",take a look at supervisor. pretty sure its exactly what youre looking for. heres a great tutorial for it too hope this helps! || i would add as a cronjob. use sudo contab e and add reboot pathtopythonscript also make sure the python file was made executable with chmod x myfile.py,1,python;logging;background;raspberry-pi,2016-04-23
33000280,python how to average ping times from file,"i am looking to write two python scripts one to ping an ip, and store the ping results to a file, and one to extract and average the ping times from the created .txt file. please note that all i really need to log are the ping times my platform is the pi if it helps below is the line of code which i plan to use to store the ping results in a text file obviously in my program i have put this in an infinity loop with a delay so it doesnt ping too often command os.systemping 127.0.0.1 pingresults.txt i am stuck on how access this file, and then to parse this file into just the useful data? please bear in mind that i am a serious amateur i am wondering if when i initially log the data into the file, if i can filter it for just the ping time. that would make averaging them later much easier. if you have any suggestions of commands of interest, or tricks, or implementations, that would be great!","ill take this in basic steps, entirely in python, ignoring python tricks open the file f openpingresults.txt, r timelist for line in f ping time is in the penultimate field, 5 chars in. fieldlist line.split pingtime fieldlist25 timelist.appendfieldlist1 add last field to end of timelist print sumtimelist floatlentimelist",-2,python;logging;raspberry-pi;average;ping,2015-10-07
29539671,correcting timestamp on c code log file,"im currently programming my raspberry pi model b with a dht11 temperature amp humidity sensor and lcd display. i have written a c script which logs values obtained from the temperature sensor to a status file which is then added to a log file. the script is as follows include lttime.hgt define logfile varlogtemp.log define currentfile vartemp.data saves the date time and humidity to a log file and current file void writevalue int temp, int humidity timet currenttime currenttime timenull write to log file file logfd logfd fopen logfile, a fprintf logfd, ld d dn, currenttime, temp, humidity fclose logfd write to current file file currfd currfd fopencurrentfile, w fprintf currfd, ld d dn, currenttime, temp, humidity fclose currfd it works, however the output i get in the log file is as follows 1428539174 16 41 1428539232 17 40 1428539257 18 40 1428539304 19 39 1428539319 19 39 with the first row intended to be the date amp time stamp, the temperature, and the humidity. do you have any suggestions as to how i could fix the date amp time, as well as changing it to a ddmmyyyy hhmmss daymonthyear hourminsec format? based on suggestions from pmg the script was changed to include lttime.hgt define logfile varlogtemp.log define currentfile vartemp.data saves the date time and humidity to a log file and current file void writevalue int temp, int humidity char dt20 space enough for yyyymmdd hhmmss and terminator struct tm tm timet currenttime currenttime timenull tm localtimeampcurrenttime convert timet to struct tm strftimedt, sizeof dt, ymd hms, amptm format write to log file file logfd logfd fopen logfile, a fprintf logfd, s d dn, dt, temp, humidity fclose logfd write to current file file currfd currfd fopencurrentfile, w fprintf currfd, s d dn, dt, temp, humidity fclose currfd","convert the timet value to struct tm and then format appropriately char dt20 space enough for ddmmyyyy hhmmss and terminator struct tm tm timet currenttime currenttime timenull tm localtimeampcurrenttime convert timet to struct tm strftimedt, sizeof dt, dmy hms, amptm format fprintfcurrfd, s d dn, dt, temp, humidity see the posix descriptions of localtime and strftime.",2,c;logging;time;timestamp;raspberry-pi,2015-04-09
29346678,python 3.2 logging with config file results in keyerror 39formatters39 on raspbian,"i equipped my python application with logging capability and it works flawlessly on my windows system with python 3.4. but when i deploy the application on my raspberry pi with raspbian and python 3.2, i receive the following error traceback most recent call last file auroraaurorawebsocket.py, line 265, in ltmodulegt logging.config.fileconfiglogging.conf file usrlibpython3.2loggingconfig.py, line 70, in fileconfig formatters createformatterscp file usrlibpython3.2loggingconfig.py, line 106, in createformatters flist cpformatterskeys file usrlibpython3.2configparser.py, line 941, in getitem raise keyerrorkey keyerror formatters the logging.conf file encoded in utf8 without bom loggers keysroot,simpleexample handlers keysscreen formatters keyssimple,complex loggerroot levelnotset handlersscreen loggersimpleexample leveldebug handlersscreen qualnamesimpleexample propagate0 handlerscreen classstreamhandler leveldebug formattercomplex argssys.stdout, formattersimple formatasctimes levelnames messages datefmt formattercomplex formatasctimes levelname8s ltmodules linenodgt messages datefmt the logging configuration is loaded in a simple oneliner logging.config.fileconfiglogging.conf im at a loss here, since, as mentioned above already, my application works fine on windows, but fails on the rpi.","well, this didnt last long... turns out, ive been running my application on the rpi from a different working directory. consequently, the file path to the logging.conf file is interpreted incorrectly relative to the differing working directory. unfortunately, the logging library tries to continue on with nonexistent files and doesnt throw a useful exception in that case.",1,python;logging;raspberry-pi;python-3.2;keyerror,2015-03-30
27456155,bash file modified alert for raspbery pi on raspbian,"i am a bit new here on stackoverflow which you can probably see by my reputation, but i was wondering how to make an audible alert or some other type of modification to an auto polling log file of failed login attempts for rdp specifically xrdp sessions on a rasbperry pi. since it is a raspberry pi, i am sure you understand why i would want to run it headless. i have done lots of searching and only seem to find references or ways to make audible alerts when connected directly to the pi. i want to have this alert come while running in a mostly silent terminal window. i would prefer a beep for new log activity if log file size has changed, beep and then the log to be checked at specific intervals i.e. every 30 seconds or 1 minute, etc. my log location is here if it helps in giving me some idea how to start making this bash script varlogxrdp.log","here is a gist of a bash script that will do exactly what you want, over ssh, on a raspberry pi or any linux, really !binbash xrdplogmonitor.sh ltoptional timeout in secondsgt this script will check and spit out your xrdp log file every x seconds default 30 if not specified if the file size has changed since your last check, your terminal will beep system alert logfilenamevarlogxrdp.log if eq 0 then echo no arguments supplied, will use default time between log polls 30 seconds secondsbetweenlogpolls30 else echo using supplied timeout of 1 seconds between log polls secondsbetweenlogpolls1 fi function updatelogmodifiedtimeandbeepifchanged lastlogmodifiedtimelogmodifiedtime logmodifiedtimestat printfz logfilename if logmodifiedtime ! lastlogmodifiedtime then echo new log activity captured!!!! below line creates the terminal beep echo ne a fi while 1 lt 2 do updatelogmodifiedtimeandbeepifchanged echo ls l logfilename echo polling logfile logfilename which was last modified at logmodifiedtime... you will need sudo on the pi to cat this xrdp log sudo cat logfilename uncomment the following line to search, for example, for user and display only those lines that contain it sudo cat logfilename grep user echo date lt this is now sleep secondsbetweenlogpolls done once you have created the xrdplogmonitor.sh file, dont forget to set it as executable by typing chmod x .xrdplogmonitor.sh then execute it by typing .xrdplogmonitor.sh",3,bash;logging;raspberry-pi;raspbian;xrdp,2014-12-13
25186270,audible errors custom nonblocking texttospeech handler for python39s logging module,"i am building a screenless raspberry pibased long term art installation. a common application of texttospeech on the raspberry pi is folks configuring their pis to speak their ip address on boot to ease sshing. i have grown to love the logging module. never again commenting out uncountable print statements makes my heart glow. for my situation, it would be ideal to have a logging handler that speaks the error message. the streamhandler and the filehandler i am currently using are great for development and postproblem diagnosis, but horrible for in situ problem solving. also, there is something delightfully scifi about my robot shouting errors at me. i found an example of a custom handler for smsbased error logging, and tried to implement my own with espeak. it speaks, but the entire program stops at the end of the first spoken sentence. i am looking for advice on how to implement a stream handler that does not block the execution of the program. my broken custom handler import logging import os based on smshandler def speakstringtosay say whatver it is told to say, squleching annoying warnings stringtosay stringtosay english female voice, emphasis on capitals k, speaking slowly s using direct text the 2gtdevnull is there because any calls to the rpi audio card result in a dozen warnings. see os.systemespeak venf3 k5 s150 stringtosay 2gtdevnull class talkhandlerlogging.handler inherit from logging.handler def initself run the regular handler init logging.handler.initself def emitself, record record.message is the log message speakrecord.message the snippet from the program that is logging logging.handlers.talkhandler speechhandler.talkhandler create the handler object talkinghandler logging.handlers.talkhandler configure the handler to only send sms for critical errors talkinghandler.setlevellogging.critical and finally we add the handler to the logging object logger.addhandlertalkinghandler ipaddress s.connect8.8.8.8, 80, s.getsockname0, s.close for s in socket.socketsocket.afinet, socket.sockdgram01 ipaddress .joinipaddress ipaddress ipaddress.replace.,dot logger.criticalcurrent ip address is ipaddress","i know this was asked ages ago i missed it when it was posted and stumbled on it by chance. the following works for me import logging import subprocess import sys class talkhandlerlogging.handler def emitself, record msg self.formatrecord cmd espeak, venf3, s150, msg p subprocess.popencmd, stdoutsubprocess.pipe, stderrsubprocess.stdout p.communicate def configurelogging h talkhandler root logging.getlogger root.addhandlerh root.setlevellogging.debug def main logging.infohello logging.debuggoodbye if name main configurelogging sys.exitmain when i run it, i hear hello and then goodbye spoken.",3,python;logging;raspberry-pi;text-to-speech,2014-08-07
23127360,use quotloggerquot to log into separate logfile,"im running a tiny script to autostart a node.jsservice on my raspberry pi. for that reason, i call it from the end of my etcrc.local just before the exit 0. the script is starting, no problem. now, my script looks like this !binbash echo node.js starting... logfilelogdate bdhms.log sudo optnodebinnode homepiwwwjsscript.js gt homepinodelogslogfile but i want to use logger instead. i gave it a try but fails. can anybody explain to me how to bind logger to log only the output of node.js into this logfile? i guess i really misunderstood the way logger works as im really not a linuxpro","logger only logs to the syslog if you really want to do things this way, then you would have to first edit your syslog.conf file and add something like this node.js logging local5. homepilogsnodejs.log local5 is a predefined facility, make sure it is not in use elsewhere in your syslog conf. now you need to restart the syslog service etcinit.dsyslog stop etcinit.dsyslog start and now you can use logger to log your messages sudo optnodebinnode homepiwwwjsscript.js logger p local5.info to have a different log file for each date, you would have to use something like logrotate. an alternative better solution would be to prepend the timestamp to each line before you log it while read msg do echo n date dmy hms gtgt logfile echo msg gtgt logfile done lt ltsudo optnodebinnode homepiwwwjsscript.js",0,linux;bash;shell;logging;raspberry-pi,2014-04-17
21476172,get log of ip39s connected to apache server,currently im developing a small project for a raspberry pi. i have set up a server and now id like to save some kind of log with all the ips that have been connected to it at any time. honestly i dont know where to start. if you could point me in the right direction itd be really appreciated. thanks in advance! alex,"apache access logs are stored in varlog you can retrieve the clients ips with this regex grep o 091,3.091,3.091,3.091,3 accesslog",0,apache;logging;ip;raspberry-pi,2014-01-31
20695241,how to add logging to a file with timestamps to a python tcp server for raspberry pi,"i am kinda stuck for my project amp i desperately need help. i need a simple tcp server python code that has features like logging amp time stamp which i could use for my raspberry pi. its for my final year project. ive looked at some examples, but as i dont have much experience in writing my own scriptscodes, im not very sure how to go about doing this. i would appreciate if someone could guide me in the right direction with explanation and some examples if possible. i am using hercules setup utility , which acts as my tcp client, while my visual studio python code acts as a server. my server can receive the data which is sent by the client by now , i just cant seem to add in a logging file which can save the sent data into text file.can someone please show me some examples or referance please? your help would mean alot. this is my code so far from socket import import thread buff 1024 buffer size host 172.16.166.206 ip address of host port 1234 port number for client amp server to recieve data def responsekey return sent by client def handlerclientsock,addr while 1 data clientsock.recvbuff receive databuffer. print data reprdata server to recieve data sent by client. if not data break if connection is closed by client, server will break and stop recieving data. print sent reprresponse respond by saying sent by client. if namemain addr host, port define addr serversock socketafinet, sockstream serversock.bindaddr binds the serversocket to a specific address ip address and port number serversock.listen0 while 1 print waiting for connection... clientsock, addr serversock.accept print ...connected from, addr show its connected to which addr thread.startnewthreadhandler, clientsock, addr","to add logging to a file with timestamps, you could use logging module import logging logging.basicconfiglevellogging.info, filenamemyserver.log, log to this file formatasctimes messages include timestamp logging.infosome message if you run the code you should see in myserver.log your timezone and current time 20131224 092017,739 some message heres a complete example of tcp server that prepends each received line from a client with sent by client phrase and sends it back !usrbinenv python import logging import sys from socketserver import threadingtcpserver, streamrequesthandler info logging.getloggername.info class echolinehandlerstreamrequesthandler def handleself infohandling request from s, self.clientaddress prepend each line bn and send it back for line in self.rfile self.wfile.writebsent by client assume asciibased encoding self.wfile.writeline infodone s, self.clientaddress def testserverclassthreadingtcpserver, handlerclassecholinehandler configure logging logging.basicconfiglevellogging.info, filenameserver.log, log to this file formatasctimes messages include timestamp parse command line arguments host, port localhost, 8826 if lensys.argv gt 1 host, separator, port sys.argv1.rpartition port intport if separator if in sys.argv1 host host accept any host, including empty listen for connections server serverclasshost, port, handlerclass infoserving on s port s, server.serveraddress try server.serveforever finally infoquit. if namemain test to run the server if the code is save in echolineserver.py python mecholineserver localhost8826 amp tail f server.log 20131224 170938,089 serving on 127.0.0.1 port 8826 to run a client echo abc nc localhost 8826 sent by client abc",9,python;logging;raspberry-pi;tcpserver,2013-12-20
14162591,minicom ignores certain characters,"hello all tech saviors out there. i am capturing serial data successfully using minicom to a text file. the serial data comes from an automatic programmable controller serial port sent to an hp printer. unfortunately, minicom ignores the pcl characters such as esc ascii 27. example sent from serial port s16h000141 received in minicom 16h000141 i am sure i am not getting the correct command line when opening minicom. any suggestions? thanks for all the help so many have provided.","hello anyone that looks into this. i found a different avenue that did exactly what i needed along with forwarding the serial data to a printer. in this case i used python. there is a modified version of pyserials serialtcpredirect.py available online. this version allows the user to set up a remote host that can accept the serial data via ethernet.in this case a printer using port 9100 raw telnet. i was able to add the file.write option to append the serial data to a file with all pcl characters. i added these lines logfile openhometestwrite.txt,a logfile.writesdata print r data original part of program logfile.close",1,logging;printing;terminal;raspberry-pi;printer-control-language,2013-01-04
